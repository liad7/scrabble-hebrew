// מילון עברי מורחב לבדיקת תקינות מילים
export const HEBREW_DICTIONARY = new Set([
  // מילים של 2 אותיות
  "אב", "אח", "אד", "אה", "אז", "אח", "אי", "אך", "אל", "אם", "אן", "אף", "אץ", "אר", "אש", "את",
  "בא", "בב", "בג", "בד", "בה", "בו", "בז", "בח", "בט", "בי", "בך", "בל", "בם", "בן", "בס", "בע", "בף", "בץ", "בק", "בר", "בש", "בת",
  "גא", "גב", "גג", "גד", "גה", "גו", "גז", "גח", "גט", "גי", "גך", "גל", "גם", "גן", "גס", "גע", "גף", "גץ", "גק", "גר", "גש", "גת",
  "דא", "דב", "דג", "דד", "דה", "דו", "דז", "דח", "דט", "די", "דך", "דל", "דם", "דן", "דס", "דע", "דף", "דץ", "דק", "דר", "דש", "דת",
  "הא", "הב", "הג", "הד", "הה", "הו", "הז", "הח", "הט", "הי", "הך", "הל", "הם", "הן", "הס", "הע", "הף", "הץ", "הק", "הר", "הש", "הת",
  
  // מילים נפוצות של 3+ אותיות
  "אבא", "אמא", "אור", "אכל", "אדם", "אהב", "איש", "אבן", "אמת", "אחד", "אלף", "ארץ", "אמר",
  "בית", "בן", "בת", "בוא", "בגד", "בקר", "בלי", "בין", "בעל", "בחר", "בנה", "ברא", "בשר",
  "גדול", "גן", "גם", "גבר", "גשם", "גמל", "גלה", "גור", "גיל", "גבה", "גדל", "גזר", "גלל",
  "דלת", "דבר", "דרך", "דם", "דג", "דעת", "דור", "דין", "דמה", "דבק", "דחה", "דלק", "דמע",
  "הר", "הלך", "היה", "הבא", "הם", "הן", "הכל", "הזה", "הנה", "הפך", "הרג", "הציל", "השב",
  
  // פעלים נפוצים
  "זמן", "זה", "זכר", "זהב", "זרק", "זעק", "זכה", "זוז", "זרע", "זקן", "זלל", "זמר", "זנח",
  "חבר", "חם", "חי", "חכם", "חלב", "חדש", "חלק", "חזק", "חפש", "חשב", "חיה", "חטא", "חרב",
  "טוב", "טל", "טעם", "טבע", "טהר", "טוח", "טמן", "טרף", "טען", "טבל", "טחן", "טלל", "טמא",
  "יד", "יום", "ילד", "יש", "ידע", "יכל", "יפה", "יצא", "ישב", "יקר", "ירד", "ישן", "יתר",
  "כלב", "כן", "כל", "כתב", "כבד", "כוח", "כף", "כסף", "כבש", "כלה", "כנס", "כרת", "כפר",
  
  // שמות עצם נוספים
  "לב", "לא", "לחם", "לילה", "לשון", "לבש", "למד", "לקח", "לכד", "לחש", "לטש", "לחץ", "לבן",
  "מים", "מה", "מקום", "מלך", "מות", "מצא", "מכר", "מלא", "מעט", "מחר", "מדד", "מרה", "משל",
  "נר", "נתן", "נפל", "נשא", "נער", "נחש", "נקה", "נגע", "נסה", "נבא", "נדר", "נהר", "נטה",
  "סוס", "סל", "סגר", "ספר", "סבב", "סלח", "סמך", "סער", "ספק", "סתר", "סבל", "סדר", "סכל",
  "עץ", "עד", "עין", "עבד", "עלה", "עשה", "עמד", "ערב", "עבר", "עזב", "עטר", "עלם", "ענה",
  
  // מילים נוספות
  "פה", "פתח", "פרח", "פעם", "פרי", "פנה", "פגש", "פלא", "פקד", "פרד", "פרק", "פרש", "פשט",
  "צבע", "צל", "צדק", "צרה", "צעק", "צחק", "צמח", "צפה", "צבא", "צום", "צרר", "צלל", "צנע",
  "קול", "קר", "קרא", "קדש", "קום", "קנה", "קבר", "קטן", "קרב", "קפץ", "קשר", "קלל", "קצר",
  "ראש", "רק", "ראה", "רבה", "רוח", "רחק", "רדף", "רגל", "רעב", "רפא", "רכב", "רמה", "רצה",
  "שם", "שמע", "שלום", "שבר", "שכב", "שחק", "שלח", "שמר", "שפך", "שרף", "שאל", "שבת", "שיר",
  "תן", "תמיד", "תפס", "תחת", "תמה", "תקף", "תלה", "תבע", "תרם", "תכן", "תחל", "תעה", "תפר",
  
  // מילים קצרות למשחק
  "דג", "גד", "בד", "דב", "בג", "גב", "אל", "לא", "מן", "נם", "על", "לע", "כל", "לכ", "בכ", "כב",
  "דופן", "שולחן", "כיסא", "ספר", "עט", "חלון", "מיטה", "ילד", "ילדה", "איש", "אישה",
  "בוקר", "ערב", "צהרים", "אדום", "כחול", "ירוק", "צהוב", "שחור", "לבן", "אפור", "חום"
])

const FINAL_FORMS: Record<string, string> = {
  ך: "כ",
  ם: "מ",
  ן: "נ",
  ף: "פ",
  ץ: "צ",
}

// נרמל סופיות: אם מילה מסתיימת באות רגילה שניתן להפוך לסופית – נבדוק גם את הגרסה עם אות סופית
export function normalizeWordVariants(word: string): string[] {
  if (!word) return []
  const variants = new Set<string>()
  variants.add(word)

  // הפוך אות סופית לאות רגילה לכל המופעים
  const regularized = word
    .split("")
    .map((ch) => FINAL_FORMS[ch as keyof typeof FINAL_FORMS] || ch)
    .join("")
  variants.add(regularized)

  // אם האות האחרונה ניתנת להמרה לצורת סופית, הוסף גם גרסה עם סופית
  const last = word[word.length - 1]
  const toFinal: Record<string, string> = { כ: "ך", מ: "ם", נ: "ן", פ: "ף", צ: "ץ" }
  if (toFinal[last]) {
    variants.add(word.slice(0, -1) + toFinal[last])
  }

  return Array.from(variants)
}

// בדיקה אם מילה קיימת במילון
export function isValidWord(word: string): boolean {
  if (word.length < 2) return false
  const variants = normalizeWordVariants(word)
  return variants.some((w) => HEBREW_DICTIONARY.has(w))
}

// הוספת מילה למילון (למשחקים מותאמים אישית)
export function addWordToDictionary(word: string): void {
  if (word.length >= 2) {
    HEBREW_DICTIONARY.add(word)
  }
}
